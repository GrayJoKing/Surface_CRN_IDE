(this.webpackJsonpsurface_crn_ide=this.webpackJsonpsurface_crn_ide||[]).push([[0],{16:function(e,t,n){"use strict";var r=n(6);Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t){r(this,e),this.matcher="",Object.assign(this,t)}},17:function(e,t,n){"use strict";var r=n(6);Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t){r(this,e),this.is_mono=!0,this.reactants=[],this.products=[],this.rate=1,Object.assign(this,t)}},21:function(e,t,n){"use strict";var r=n(6),a=n(39);Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t){r(this,e),this.red=0,this.green=0,this.blue=0,this.species=[],Object.assign(this,t)}return a(e,[{key:"rgb",value:function(){return[this.red,this.green,this.blue]}}]),e}();t.default=i},31:function(e,t,n){"use strict";var r=n(6),a=n(18),i=n(32),c=n(33),u=n(36);Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){i(n,e);var t=c(n);function n(e){var i;return r(this,n),i=t.call(this),Object.assign(a(i),e),i}return n}(u(Map));t.default=s},40:function(e,t,n){"use strict";var r=n(11),a=n(6),i=n(41),c=n(42),u=n(46),s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function c(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}s((r=r.apply(e,t||[])).next())}))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parse_import_files=t.parse_code=void 0;var o=l(n(16)),d=l(n(17)),p=l(n(21)),f=l(n(8));function h(e,t){var n=function(e){if(1!=(e.match(/->/g)||[]).length)return!1;var t=1,n=(e=e.replace(/\((\d+)\)/,(function(e,n){return t=+n,""}))).split("->").map((function(e){return e.split("+").map((function(e){return new o.default({matcher:e.trim()})}))})),r=u(n,2),a=r[0],i=r[1];return!(a.length!=i.length||a.length>2||0==a.length)&&new d.default({reactants:a,products:i,rate:t,is_mono:1==a.length})}(e);if(!1!==n)return t.rules.push(n),!0;var r,a=function(e){var t=e.match(/^(?:\{([^}]+)\})? *((?: *[^,: ]+,? *)+) *: *\((\d+) *, *(\d+) *, *(\d+)\)$/);if(null==t)return!1;var n=t[2].split(/,\s*|\s+/).map((function(e){return new o.default({matcher:e.trim()})}));return[t[1],new p.default({species:n,red:+t[3],green:+t[4],blue:+t[5]})]}(e);if(!1!==a)return(r=t.colour_map).set.apply(r,c(a)),!0;var i=function(e){return 1==(e.match(/=/g)||[]).length&&e.split("=").map((function(e){return e.trim()}))}(e);if(!1!==i){var s=u(i,2),l=s[0],f=s[1];return t.options.set(l,f),!0}return!1}function m(e){return e.split(/\s+|,/).map((function(e){return new o.default({matcher:e})}))}function j(e){var t,n=!1,r=new f.default,a=i(e);try{for(a.s();!(t=a.n()).done;){var c=t.value;if(""!=(c=c.trim().replace(/#.*/,"")))if(n){if("!END_INIT_STATE"==c){n=!1;continue}var u=m(c);r.initial_state.push(u)}else{if("!START_INIT_STATE"==c){n=!0;continue}h(c,r)}}}catch(s){a.e(s)}finally{a.f()}return r}t.parse_code=j,t.parse_import_files=function(e){return s(this,void 0,void 0,r.mark((function t(){var n,s,l,o,d,p,f,h,m,v,b,_,O,y,x,C,g;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=3;break}return console.log("No input files"),t.abrupt("return",!1);case 3:n=function e(){a(this,e),this.data=[],this.imported=!1},s=new Map,l=i(e),t.prev=7,l.s();case 9:if((o=l.n()).done){t.next=18;break}return d=o.value,p=new n,t.next=14,d.text();case 14:p.data=t.sent.split("\n").map((function(e){return e.trim().replace(/#.*/,"")})),s.set(d.name,p);case 16:t.next=9;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(7),l.e(t.t0);case 23:return t.prev=23,l.f(),t.finish(23);case 26:f=i(s);try{for(f.s();!(h=f.n()).done;){m=u(h.value,2),m[0],v=m[1],b=i(v.data);try{for(b.s();!(_=b.n()).done;)_.value.match(/^!INCLUDE /)}catch(r){b.e(r)}finally{b.f()}}}catch(r){f.e(r)}finally{f.f()}O=[],y=i(s);try{for(y.s();!(x=y.n()).done;)C=u(x.value,2),C[0],(g=C[1]).imported||O.push.apply(O,c(g.data))}catch(r){y.e(r)}finally{y.f()}return t.abrupt("return",j(O));case 32:case"end":return t.stop()}}),t,null,[[7,20,23,26]])})))}},50:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var r=n(11),a=n.n(r),i=n(25),c=n(12),u=n(9),s=n(23),l=n(1),o=n.n(l),d=n(24),p=n.n(d),f=n(8),h=n.n(f),m=(n(50),n(2)),j=n(3),v=n(5),b=n(4),_=n(0),O=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(_.jsx)("header",{className:"grid",children:Object(_.jsxs)("nav",{className:"grid",children:[Object(_.jsx)("h2",{className:"grid title",children:"Surface CRN Simulator"}),Object(_.jsx)("h4",{className:"grid simulator_options",children:"(sim options)"}),Object(_.jsx)("h4",{className:"grid simulator_controls",children:"(sim controls)"})]})})}}]),n}(o.a.Component),y=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){return Object(m.a)(this,n),t.call(this,e)}return Object(j.a)(n,[{key:"render",value:function(){return Object(_.jsxs)("div",{className:"grid panel state_panel",children:[Object(_.jsx)("h3",{className:"panel_header",children:" Initial State "}),Object(_.jsx)(x,{model:this.props.model})]})}}]),n}(o.a.Component),x=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){var r;Object(m.a)(this,n),(r=t.call(this,e)).canvas_ref=null;var a=e.model;return r.setState({canvas_state:a.initial_state,colour_map:a.colour_map,grid_type:a.grid_type}),r}return Object(j.a)(n,[{key:"updateGrid",value:function(e,t,n){var r=this.state.colour_map.find_colour(n);null===r&&(r=new f.SCRN_Colour({name:"white",red:0,green:0,blue:0})),this.draw(e,t,r)}},{key:"draw",value:function(e,t,n){}},{key:"render",value:function(){var e=this;return Object(_.jsx)("canvas",{ref:function(t){return e.canvas_ref=t}})}}]),n}(o.a.Component),C=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(_.jsxs)("div",{className:"grid panel rules_panel",children:[Object(_.jsx)("h3",{className:"panel_header",children:" Transition Rules "}),Object(_.jsx)("div",{id:"rule_container",children:Object(_.jsx)("table",{id:"rule_list"})})]})}}]),n}(o.a.Component),g=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(_.jsx)("div",{className:"grid panel options_panel",children:Object(_.jsx)("h3",{children:" Simulator Options "})})}}]),n}(o.a.Component),N=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(_.jsxs)("div",{className:"grid panel colour_panel",children:[Object(_.jsx)("h3",{children:" Colour Mapping "}),Object(_.jsx)("div",{id:"colour_container",children:Object(_.jsx)("table",{id:"colour_list"})})]})}}]),n}(o.a.Component),w=function(e){Object(v.a)(n,e);var t=Object(b.a)(n);function n(e){return Object(m.a)(this,n),t.call(this,e)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props.import_code;return Object(_.jsxs)("div",{className:"grid panel import_export_panel",children:[Object(_.jsx)("h3",{children:" Import/Export "}),Object(_.jsxs)("div",{children:[Object(_.jsx)("input",{type:"file",id:"import_input",multiple:!0}),Object(_.jsx)("button",{type:"submit",id:"import_submit",onClick:e,children:" Import "})]})]})}}]),n}(o.a.Component),S=new h.a;function k(){return(k=Object(s.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=document.getElementById("import_input").files)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,h.a.parser.parse_import_files(Object(i.a)(t));case 5:!1===(n=e.sent)||(S=n,E());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){!function(e){var t=document.getElementById("rule_list");if(null===t)return;t.textContent="";var n,r=Object(u.a)(e);try{for(r.s();!(n=r.n()).done;){var a,i=n.value,s=document.createElement("tr"),l=Object(u.a)([i.reactants,i.products].entries());try{for(l.s();!(a=l.n()).done;){var o,d=Object(c.a)(a.value,2),p=d[0],f=d[1];1===p&&((o=document.createElement("td")).textContent="=>",s.appendChild(o));var h,m=Object(u.a)(f.entries());try{for(m.s();!(h=m.n()).done;){var j=Object(c.a)(h.value,2),v=j[0],b=j[1];1===v&&((o=document.createElement("td")).textContent="+",s.appendChild(o)),o=document.createElement("td");var _=document.createElement("input");_.type="text",_.value=b.matcher,o.appendChild(_),s.appendChild(o)}}catch(O){m.e(O)}finally{m.f()}}}catch(O){l.e(O)}finally{l.f()}t.appendChild(s)}}catch(O){r.e(O)}finally{r.f()}}(S.rules),function(e){var t=document.getElementById("colour_list");if(null==t)return;t.textContent="";var n,r=Object(u.a)(e);try{for(r.s();!(n=r.n()).done;){var a,i=Object(c.a)(n.value,2),s=i[0],l=i[1],o=document.createElement("tr");a=document.createElement("td");var d=document.createElement("input");d.type="text",d.value=s,a.appendChild(d),o.appendChild(a),(a=document.createElement("td")).textContent="("+l.rgb().join(",")+")",o.appendChild(a);var p,f=Object(u.a)(l.species);try{for(f.s();!(p=f.n()).done;){var h=p.value;a=document.createElement("td"),(d=document.createElement("input")).type="text",d.value=h.matcher,a.appendChild(d),o.appendChild(a)}}catch(m){f.e(m)}finally{f.f()}t.appendChild(o)}}catch(m){r.e(m)}finally{r.f()}}(S.colour_map),S.initial_state,S.colour_map}p.a.render(Object(_.jsxs)(o.a.StrictMode,{children:[Object(_.jsx)("title",{children:" Surface CRN Simulator "}),Object(_.jsxs)("div",{className:"main_grid grid",children:[Object(_.jsx)(O,{}),Object(_.jsx)(y,{model:S}),Object(_.jsx)(C,{}),Object(_.jsx)(g,{}),Object(_.jsx)(N,{}),Object(_.jsx)(w,{import_code:function(){return k.apply(this,arguments)}})]})]}),document.getElementById("root"))},8:function(e,t,n){"use strict";var r=n(6),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SCRN_Colour=t.SCRN_Colour_Map=t.SCRN_Transition_Rule=t.SCRN_Species=void 0;var i=a(n(16));t.SCRN_Species=i.default;var c=a(n(17));t.SCRN_Transition_Rule=c.default;var u=a(n(31));t.SCRN_Colour_Map=u.default;var s=a(n(21));t.SCRN_Colour=s.default;var l=n(40),o=function e(){r(this,e),this.initial_state=[],this.rules=[],this.colour_map=new u.default,this.options=new Map};t.default=o,o.parser={parse_import_files:l.parse_import_files,parse_code:l.parse_code}}},[[52,1,2]]]);
//# sourceMappingURL=main.90fffafe.chunk.js.map